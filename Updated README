# Air Monitor ‚Äì Raspberry Pi Air Quality Dashboard

A complete Raspberry Pi‚Äìpowered **air quality monitor** using:

- **PMSA003I** (PM1.0 / PM2.5 / PM10)
- **AHT20** (Temperature & Humidity)
- **Flask Web Dashboard**
- **Chart.js Live Graphs**
- **CSV Logging**
- **System Metrics (CPU Temp, WiFi RSSI, Uptime, IP)**
- **Safe Shutdown Button**

Built to function as a **portable spot-check air quality station**, accessible from any device on the same network or hotspot.

---

##  Features

### üì° Real-time Sensor Readings
- Temperature (¬∞F / ¬∞C)
- Humidity (%RH)
- PM1.0 / PM2.5 / PM10
- Air Quality Category (AQI-based)

###  Live Dashboard
- Flask-powered web interface  
- Realtime updating cards  
- Dual live charts:  
  - Temperature & Humidity  
  - All particulate sizes  
- Auto-refresh + 15-minute rolling window

###  Logging
Each session generates a timestamped CSV inside:

```
~/air_monitor/logs/
```

Format includes:
```
time_iso, temp_c, temp_f, humidity, pm1, pm25, pm10, aqi_category
```

### üñ• System Status
- CPU temperature  
- WiFi RSSI  
- Uptime  
- Local IP Address  

### ‚èª Safe Shutdown Button
Gracefully powers down the Raspberry Pi via `/shutdown`.

---

## üõ† Hardware

### Required
- Raspberry Pi Zero 2 W (recommended) or Pi 3/4  
- PMSA003I (I¬≤C version)  
- AHT20 Temperature/Humidity sensor  
- JST or jumper wiring for I¬≤C  
- USB power supply  

### Wiring
Both sensors connect to **I¬≤C**:

| Device     | SDA | SCL | Power | Ground |
|------------|-----|-----|--------|--------|
| **AHT20**  | ‚úì   | ‚úì   | 3.3V   | GND    |
| **PMSA003I** | ‚úì | ‚úì   | 5V     | GND    |

---

##  Software Installation

Install dependencies:

```bash
sudo apt update
sudo apt install python3-pip python3-flask -y
pip3 install adafruit-circuitpython-ahtx0 adafruit-circuitpython-pm25
```

Enable I¬≤C:

```bash
sudo raspi-config
# Interface Options ‚Üí I2C ‚Üí Enable
```

---

##  Running the Dashboard

```bash
python3 air_monitor.py
```

Visit the dashboard:

```
http://<pi-ip>:5000
```

---

##  Optional: Auto-Start on Boot

Create a systemd service file:

### `air_monitor.service`
```ini
[Unit]
Description=Air Monitor Dashboard
After=network.target

[Service]
ExecStart=/usr/bin/python3 /home/enviro/air_monitor/air_monitor.py
WorkingDirectory=/home/enviro/air_monitor
Restart=always
User=enviro

[Install]
WantedBy=multi-user.target
```

Enable with:

```bash
sudo cp air_monitor.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable air_monitor
sudo systemctl start air_monitor
```

---

##  API Endpoints

| Route | Description |
|-------|-------------|
| `/api/data` | Latest sensor + system info |
| `/api/history` | Rolling history (15 minutes) |
| `/` | Dashboard interface |

---

##  Safe Shutdown Button

Dashboard shutdown triggers:

```python
@app.route("/shutdown")
def shutdown():
    os.system("sudo shutdown -h now")
    return "Shutting down...", 200
```

You must allow passwordless shutdown:

```bash
sudo visudo
```

Add:

```
enviro ALL=NOPASSWD: /sbin/shutdown
```

---

## üó∫ Roadmap

- Add Reboot button  
- Add VOC/CO2 sensors (SGP40, SCD40)  
- Add GPS logging for mobile AQ mapping  
- Add SD wear-reduction mode (RAM buffering)  

---

##  License
MIT (or your choice)

---

##  Author
BarnacleyBill ‚Äî Raspberry Pi Air Quality Spot-Check Project
